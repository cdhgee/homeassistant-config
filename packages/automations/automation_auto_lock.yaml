automation:
  - alias: "Auto lock"
    description: "Lock the front door and close the garage after ten minutes"
    # If any of the triggers occurs again during the delay, restart
    mode: restart
    trigger:
      - platform: "template"
        # Only fire if outside mode is off, front door is closed, and
        # either front door is unlocked or garage door is open
        value_template: >
          {{
            is_state('input_boolean.outside_mode', 'off') and
            is_state('binary_sensor.front_door_sensor', 'off') and
            (
              is_state('lock.front_door', 'unlocked') or
              is_state('cover.garage_door', 'open')
            )
          }}
        for:
          minutes: 10
    action:
      - service: script.lock_up
