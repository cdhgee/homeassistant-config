alias: Auto lock
id: 7d8eb4e1-f63f-4bed-a5f1-1b7134bfaf7a
description: Lock the front door and close the garage after ten minutes

# If any of the triggers occurs again during the delay, restart
mode: restart

trigger:
  - platform: "template"
    # Only fire if outside mode is off, front door is closed, and
    # either front door is unlocked or garage door is open
    value_template: >
      {{
        is_state('input_boolean.outside_mode', 'off') and
        is_state('binary_sensor.living_room_front_door', 'off') and
        (
          is_state('lock.front_door_lock', 'unlocked') or
          is_state('cover.garage_door', 'open')
        )
      }}
    for:
      minutes: 10

action:
  - service: script.lock_up
